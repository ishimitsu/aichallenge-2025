# Claude Code プロジェクトガイドライン

このファイルには、自動運転AIチャレンジプロジェクトでClaude Codeが作業する際の、プロジェクト固有のガイドラインとルールが含まれています。

## 変更管理ルール ⚠️

### サイクロマティック複雑度管理
- **複雑度しきい値**: 
  - 1-6: ✅ 良好（保守しやすい）
  - 7-10: ⚠️ 警告（レビュー推奨、分割検討）
  - 11+: 🚨 危険（リファクタリング必須）
- **警告条件**: 新規/変更された関数・メソッドの複雑度が7以上の場合
- **対応策**: 関数分割、早期return、guard clause活用を提案

### 複雑度計算基準（C++）
- **基本値**: 1
- **分岐**: if, else if, while, for, do-while, switch case (+1)
- **例外**: try-catch block (+1)  
- **論理演算**: &&, ||, ?: (+1)

## 変更管理ルール ⚠️

### コミットサイズ制限
- **コミットメッセージ制限**: 最大200文字
- **警告しきい値**: コミットメッセージが200文字に近づくか超えた場合にユーザーに警告
- **必要な対応**: 制限を超える場合、変更をより小さなコミットに分割することを提案

### プルリクエストサイズ制限
- **変更行数制限**: 最大200行（追加+削除）
- **警告しきい値**: 変更が200行に近づくか超えた場合にユーザーに警告
- **必要な対応**: 制限を超える場合、複数のPRに分割することを提案

### 実装戦略
変更が制限に近づいた場合：
1. **現在の作業を一時停止** - ユーザーに即座に警告
2. **チェックポイントコミットを提案** - 現在の安定した進捗をコミット
3. **分割アプローチを推奨** - 残りの作業をより小さな塊に分割
4. **分割提案を提供** - 論理的な分割境界を提案

警告メッセージの例：
```
⚠️ 変更サイズ警告 ⚠️
現在の変更: 180+行（200行制限に接近中）
コミットメッセージ: 185+文字（200文字制限に接近中）

推奨: 現在の進捗をコミットし、次のフェーズで継続してください
```

## 理由
- **保守性**: 小さな変更はレビューやデバッグが容易
- **リスク軽減**: 潜在的な問題の影響範囲を制限
- **より良いgit履歴**: より細かなコミットでプロジェクト追跡が改善
- **コードレビュー効率**: 小さなPRはより良いレビュー品質を得られる

## プロジェクトコンテキスト
- **種別**: 自動運転AIチャレンジ2025
- **主な焦点**: GNSS-IMU測位システムの改善
- **リポジトリ**: マルチパッケージROS2ワークスペース
- **開発アプローチ**: 頻繁なチェックポイントでの反復的改善

---
*このファイルはプロジェクトガイドラインの進化に合わせて更新する必要があります*
